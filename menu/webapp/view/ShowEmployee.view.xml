<mvc:View
	xmlns:core="sap.ui.core"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns="sap.m"
	controllerName="esj.menu.controller.ShowEmployee"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:upload="sap.m.upload"
	xmlns:suite="sap.suite.ui.commons"
	class="sapUiSizeCompact"
>
	<SplitApp id="splitAppEmployee">
		<masterPages>
			<Page showHeader="false">
				<Toolbar class="sapUiTinyMarginTop">
					<Button
						icon="sap-icon://nav-back"
						press="onPressBack"
					/>
					<SearchField
						liveChange="onSearchEmployee"
						width="100%"
					/>
				</Toolbar>
				<List
					id="List"
					itemPress="onSelectEmployee"
					items="{
						path: 'odataModel>/Users',
						filters: [{
							path: 'SapId',
							operator: 'EQ',
							value1: 'lmhuertas@gmail.com'
						}]
					}"
				>
					<items>
						<StandardListItem
							title="{odataModel>FirstName} {odataModel>LastName}"
							description="{odataModel>Dni}"
							type="Active"
						/>
					</items>
				</List>
			</Page>
		</masterPages>
		<detailPages>
			<Page
				id="detailSelectEmployee"
				showHeader="false"
			>
				<FlexBox
					alignItems="Center"
					justifyContent="Center"
					height="100%"
				>
					<Text text="{i18n>seleccioneEmpleado}" />
				</FlexBox>
			</Page>
			<Page
				id="detailEmployee"
				title="{i18n>detalleEmpleado}"
			>
				<ObjectHeader
					icon="{= ${odataModel>Type}==='0' ? 'sap-icon://employee-pane' : ${odataModel>Type}==='1' ? 'sap-icon://employee' : 'sap-icon://leads' }"
					title="{odataModel>FirstName} {odataModel>LastName}"
					intro="{odataModel>Dni}"
					class="sapUiResponsivePadding--header"
					responsive="true"
				>
					<ObjectAttribute
						title="{i18n>startIncorporation}"
						text="{
							path: 'odataModel>CreationDate',
							type: 'sap.ui.model.type.Date'
						}"
					/>
					<ObjectAttribute
						title="{i18n>type}"
						text="{= ${odataModel>Type} === '0' ? ${i18n>interno} : ${odataModel>Type} === '1' ? ${i18n>autonomo} : ${i18n>gerente}}"
					/>
					<ObjectAttribute
						title="{i18n>comment}"
						text="{odataModel>Comments}"
					/>
					<ObjectAttribute
						title="{i18n>employeeId}"
						text="{odataModel>EmployeeId}"
					/>
				</ObjectHeader>
				<IconTabBar class="sapUiResponsiveContentPadding">
					<items>
						<IconTabFilter
							design="Horizontal"
							icon="sap-icon://attachment"
							text="{i18n>ficheros}"
						>
							<upload:UploadSet
								id="uploadSet"
								maxFileNameLength="55"
								maxFileSize="10"
								uploadUrl="/sap/opu/odata/sap/ZEMPLOYEES_SRV/Attachments"
								beforeUploadStarts="onBeforeUploadStart"
								uploadCompleted="onUploadComplete"
								afterItemRemoved="onFileDeleted"
								items="{odataModel>UserToAttachment}"
							>
								<upload:items>
									<upload:UploadSetItem fileName="{odataModel>DocName}" />
								</upload:items>
								<upload:toolbar>
									<OverflowToolbar>
										<ToolbarSpacer />
										<Button
											id="download"
											icon="sap-icon://download"
											press="onDownloadFile"
										/>
									</OverflowToolbar>
								</upload:toolbar>
							</upload:UploadSet>
						</IconTabFilter>
						<IconTabFilter
							icon="sap-icon://money-bills"
							design="Horizontal"
							text="{i18n>historial}"
						>
							<suite:Timeline
								enableDoubleSided="true"
								groupByType="Year"
								groupBy="CreationDate"
								showHeaderBar="false"
								enableScroll="false"
								height="100%"
								sortOldestFirst="true"
								content="{odataModel>UserToSalary}"
							>
								<suite:content>
									<suite:TimelineItem
										userName="{
											parts: [{
												path: 'odataModel>Ammount'
											}, {
												path: 'odataModel>Waers'
											}],
											type: 'sap.ui.model.type.Currency',
											formatOptions: {
												showMeasure: false
											}
										}"
										icon="sap-icon://circle-task"
										text="{odataModel>Comments}"
										dateTime="{odataModel>CreationDate}"
									/>
								</suite:content>
							</suite:Timeline>
						</IconTabFilter>
					</items>
				</IconTabBar>
				<footer>
					<Toolbar>
						<ToolbarSpacer />
						<Button
							text="{i18n>unsubscribe}"
							press="onDeleteEmployee"
						/>
						<Button
							text="{i18n>ascend}"
							press="onRiseEmployee"
						/>
					</Toolbar>
				</footer>
			</Page>
		</detailPages>
	</SplitApp>
</mvc:View>